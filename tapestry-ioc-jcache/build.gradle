plugins {
    id 'tapestry.junit4-legacy-convention'
}

description = 'JCache (JSR 107) integration for Tapestry-IoC'

def moduleLibs = [
    javaxCacheApi: 'javax.cache:cache-api:1.0.0',
    javaxCacheTests: 'javax.cache:cache-tests:1.0.0',
    javaxCacheDomain: 'javax.cache:test-domain:1.0.0',
    cacheAnnotations: 'org.jsr107.ri:cache-annotations-ri-common:1.0.0',
    infinispanJcache: 'org.infinispan:infinispan-jcache:9.4.24.Final',
]

dependencies {
    provided project(":tapestry-ioc")

    implementation moduleLibs.javaxCacheApi
    implementation moduleLibs.cacheAnnotations

    testImplementation(moduleLibs.javaxCacheTests)
    testImplementation moduleLibs.javaxCacheDomain
    testRuntimeOnly moduleLibs.infinispanJcache /* Just to be able to run the tests */
}

jar {
    manifest {
        attributes 'Tapestry-Module-Classes': 'org.apache.tapestry5.jcache.module.JCacheModule'
    }
}
